# =============================================================================
# DEVELOPMENT Override - Project Continuum
# =============================================================================
# Se încarcă automat cu: docker compose up
# Adaugă: mailpit, phpmyadmin, xdebug config
# =============================================================================

services:
  # Override app pentru development (xdebug)
  app:
    environment:
      - PHP_IDE_CONFIG=serverName=project-continuum
      - XDEBUG_MODE=${XDEBUG_MODE:-off}
      - XDEBUG_CONFIG=client_host=host.docker.internal
    extra_hosts:
      - "host.docker.internal:host-gateway"

  # Mailpit (Email Testing)
  mailpit:
    image: axllent/mailpit:latest
    container_name: project_continuum_mailpit
    restart: unless-stopped
    ports:
      - "${MAILPIT_UI_PORT:-8030}:8025"
      - "${MAILPIT_SMTP_PORT:-1030}:1025"
    networks:
      - project_continuum

  # phpMyAdmin (Database GUI)
  phpmyadmin:
    image: phpmyadmin:latest
    container_name: project_continuum_phpmyadmin
    restart: unless-stopped
    ports:
      - "${PHPMYADMIN_PORT:-8032}:80"
    environment:
      PMA_HOST: mysql
      PMA_PORT: 3306
      PMA_USER: ${DB_USERNAME}
      PMA_PASSWORD: ${DB_PASSWORD}
      UPLOAD_LIMIT: 256M
    depends_on:
      - mysql
    networks:
      - project_continuum

  # Redis Commander (Redis GUI) - opțional, pornește cu --profile redis-gui
  redis-commander:
    image: rediscommander/redis-commander:latest
    container_name: project_continuum_redis_commander
    restart: unless-stopped
    ports:
      - "${REDIS_COMMANDER_PORT:-8033}:8081"
    environment:
      - REDIS_HOSTS=local:redis:6379
    depends_on:
      - redis
    networks:
      - project_continuum
    profiles:
      - redis-gui
